# ✨Today I Developed🤞



### ✔개발목표

> 오늘 계획한 개발 목표를 알려주세요

```
community / information 게시판 router연결 및 axios통신
```



### 👌개발 진행 상황

> 금일 개발한 목표에 대한 개발진행한 내용

- api/article.js
  - 컴포넌트 각 카테고리별로 axios요청을 보내 필요한 정보만 받아온다.
  - 메인 카테고리
    - 각 게시판(community/information) 전체의 게시물을 읽어온다.(각 게시판 메인 페이지에서 사용)
  - 서브 카테고리
    - 각 게시판의 세부 카테고리의 게시물을 읽어온다.

```javascript
// 메인 카테고리 Read
function axiosReadMain(mainCategory, success, fail) {
  instance
    .get(`/article/main/${mainCategory}`)
    .then(success)
    .catch(fail);
}

// 서브 카테고리 Read
function axiosReadSub(subCategory, success, fail) {
  instance
    .get(`/article/sub/${subCategory}`)
    .then(success)
    .catch(fail);
}
```

- 각 컴포넌트 별 axiosReadSub메서드 사용

```javascript
// 각 컴포넌트별로 subCategory에 해당하는 게시물만 받아온다.
created() {
    // community - free, anonymous, promotion
    // information - it, job
    const subCategory = '{subCategory 이름}' 
    this.articles = axiosReadSub(
        subCategory,
        res => {
            console.log(res)
            this.articles = res.data
            console.log(res.data)
        },
        err => {
            console.log(err);
        }
    )
},
```



- 각 컴포넌트의 writeArticle 메서드

```javascript
// 글쓰기 버튼을 누를 때, Register.vue에 mainCategory와 subCategory를 같이 보낸다.

// 게시판
params: { mainCategory:'community', subCategory: "free" }
params: { mainCategory:'community', subCategory: "anonymous" }
params: { mainCategory:'community', subCategory: "promotion" }

// 정보
params: { mainCategory:'information', subCategory: "it" }
params: { mainCategory:'information', subCategory: "job" }
```

- Register.vue

```javascript
// 각 컴포넌트에서 보낸 정보를 $route를 통해 받아 사용
data() {
    return {
        ...
        mainCategory: this.$route.params.mainCategory,
        subCategory: this.$route.params.subCategory    
    };
},
```

### 🤷‍♂️개발이슈

> 개발 과정에서 발생한 이슈가 있다면 알려주세요

```
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Cannot add or update a child row: a foreign key constraint fails (`ssafying`.`Article`, CONSTRAINT `FK_User_TO_Article_1` FOREIGN KEY (`userId`) REFERENCES `User` (`userId`))
### The error may exist in file [C:\Users\multicampus\Desktop\c101\backend\target\classes\mapper\article.xml]
### The error may involve com.ssafy.ssafying.model.mapper.ArticleMapper.articleInsert-Inline
### The error occurred while setting parameters
### SQL: insert into Article(                   userId,                   title,                   content,                   mainCategory,    
               subCategory,                   price,                   location,                   articleImage,                   watchCount  
           )             values(                   ?,                   ?,                   ?,                   ?,                   ?,      
             ?,                   ?,                   ?,                   ?             );
### Cause: java.sql.SQLIntegrityConstraintViolationException: Cannot add or update a child row: a foreign key constraint fails (`ssafying`.`Article`, CONSTRAINT `FK_User_TO_Article_1` FOREIGN KEY (`userId`) REFERENCES `User` (`userId`))
; Cannot add or update a child row: a foreign key constraint fails (`ssafying`.`Article`, CONSTRAINT `FK_User_TO_Article_1` FOREIGN KEY (`userId`) REFERENCES `User` (`userId`)); nested exception is java.sql.SQLIntegrityConstraintViolationException: Cannot add or update a child row: a foreign key constraint fails (`ssafying`.`Article`, CONSTRAINT `FK_User_TO_Article_1` FOREIGN KEY (`userId`) REFERENCES `User` (`userId`))] with root cause

- 현재 컴포넌트별 router/CRUD axios통신 작업 완료
- userId에 대한 오류로 수정 진행 중이므로 유저아이디 받아오는 부분 구현되면 작업한 부분 다시 확인해봐야함
```



### 🐱‍🚀향후 개발 계획

> 금일 개발과정을 바탕으로 내일 혹은 금주에 개발이 필요한 내용을 알려주세요

```javascript
// 게시판 별 router.js 변경 및 추가
현재
board/{subCategory}

변경 예정
board/{MainCategory}/{subCategory}
```

