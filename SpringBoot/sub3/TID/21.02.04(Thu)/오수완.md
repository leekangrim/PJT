# ✨Today I Developed🤞



### ✔개발목표

```
무한 스크롤 테스트
게시판 router경로로 재전환
```

### 👌개발 진행 상황

> vue의 라이프사이클을 활용한 무한스크롤 링크 -  [무한 스크롤 참고자료](https://velog.io/@unani92/Vue-JS-%EB%AC%B4%ED%95%9C%EC%8A%A4%ED%81%AC%EB%A1%A4%EA%B3%BC-%EB%9D%BC%EC%9D%B4%ED%94%84%EC%82%AC%EC%9D%B4%ED%81%B4-Hook)

- CDN 사용

```html
위의 링크에서는 Vue의 라이프사이클을 적절히 사용하여 무한 스크롤을 구현한다.
구현을 위해 5000개의 더미 이미지데이터(get요청으로 이미지 받아옴)와 라이브러리를 사용한다.

<!--무한스크롤 구현을 위한 라이브러리 CDN-->
<!-- cdn은 vue로 import를 못해서 index.html과 GroupMain.vue 에서 스크립트로 불러와서 사용했다. -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/scrollmonitor/1.2.0/scrollMonitor.js" integrity="sha256-BseZlDlA+yL4qu+Voi82iFa5aaifralQEXIjOjaXgeo=" crossorigin="anonymous"></script>
```

- 페이지별로 끊어서 데이터를 불러오기위한 변수 설정

```javascript
export default{
    data: {
        photos: [],
        page: 1,    
    },
}
```

- created
  - 랜더링 전에 사진을 미리 받아온다.
  - params은 요청을 넘겨줄 때 보내줄 파라미터 변수이다.

```javascript
<div id="app">
  <div v-for="photo in photos">
    <h5>{{photo.title}}</h5>
    <img :src="photo.thumbnailUrl" alt="">
  </div>
</div>

// 사진 불러오기
created() {
	this.getPhotos()
	},
methods: {
	getPhotos: function() {
		const option = {
			param: {
				_page: this.page++,
				_limit: 5,
			}
		}
		axios.get("https://jsonplaceholder.typicode.com/photos",options)
			.then(res => {
				this.photos = [...this.photos,...res.data]
			})   
		}
	}
```

- mounted
  - 무한스크롤을 구현하기 위해서 **스크롤이 바닥으로 내려갔다는 사실을 알아야한다.**
  - scrollMonitor를 통해 bottomSensor에 바닥에 닿을 때를 판단하여 사진을 불러온다.
    - (스크롤이 바닥에 닿을 때 getPhotos()를 통해 사진을 불러온다)

```javascript
// html
<div id="bottomSensor"></div>

// javascript
methods: {
            ...
            ...
        //무한스크롤 구현 부분
        addScrollWatcher: function () {
            const bottomSensor = document.querySelector("#bottomSensor")
            const watcher = scrollMonitor.create(bottomSensor)
            watcher.enterViewport(() => {
                // 서버 과부하를 막기 위한 안전장치 0.5초
                setTimeout(() => {
                  this.getPhotos()
                },500)
            })
        }
    },
    mounted: function () {
        this.addScrollWatcher()
    }
```

- updated
  - mounted된 이후 뷰포트가 꽉 찰 때까지 데이터를 불러오고 싶을 경우 사용한다.
  - 사실 mounted에서 불러오는 코드와 비슷해서(사용 메서드만 다름) scrollMonitor 의 내부 메서드를 자세히 알아보는편이 도움이 될듯하다.

```javascript
methods: {
            ...
        data: {
                photos: [],
                page: 1,    
                },
        //무한스크롤 구현 부분
        loadUntilViewportIsFull: function () {
                const bottomSensor = document.querySelector("#bottomSensor")
                const watcher = scrollMonitor.create(bottomSensor)
                if (watcher.isFullyInViewport) {
                    this.getPhotos()
                }
            }
    },
    updated: function () {
        this.loadUntilViewportIsFull()
    }
```



### 🤷‍♂️개발이슈

> 개발 과정에서 발생한 이슈가 있다면 알려주세요

```
- 무한 스크롤을 테스트형식으로 구현해봤는데 테스트에 사용한 라이브러리보다 더 좋은 라이브러리가 있는 것 같다.(이름도 vue-infinite-loading 이다) 더 자세히 찾아본 후 적용해봐야겠다.
- 컴포넌트만 갈아끼는 방식으로 게시판/정보/싸피마켓을 개선했는데, router방식이 유지보수에 더 유용할 것 같아서 다시 롤백했다.
```



### 🐱‍🚀향후 개발 계획

> 금일 개발과정을 바탕으로 내일 혹은 금주에 개발이 필요한 내용을 알려주세요

```
그룹 게시판 작업 - 피드 형식(무한 스크롤)
```

