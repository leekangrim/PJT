# âœ¨Today I DevelopedğŸ¤



### âœ”ê°œë°œëª©í‘œ

> ì˜¤ëŠ˜ ê³„íší•œ ê°œë°œ ëª©í‘œë¥¼ ì•Œë ¤ì£¼ì„¸ìš”

```
community / information ê²Œì‹œíŒ routerì—°ê²° ë° axiosí†µì‹ 
```



### ğŸ‘Œê°œë°œ ì§„í–‰ ìƒí™©

> ê¸ˆì¼ ê°œë°œí•œ ëª©í‘œì— ëŒ€í•œ ê°œë°œì§„í–‰í•œ ë‚´ìš©

- api/article.js
  - ì»´í¬ë„ŒíŠ¸ ê° ì¹´í…Œê³ ë¦¬ë³„ë¡œ axiosìš”ì²­ì„ ë³´ë‚´ í•„ìš”í•œ ì •ë³´ë§Œ ë°›ì•„ì˜¨ë‹¤.
  - ë©”ì¸ ì¹´í…Œê³ ë¦¬
    - ê° ê²Œì‹œíŒ(community/information) ì „ì²´ì˜ ê²Œì‹œë¬¼ì„ ì½ì–´ì˜¨ë‹¤.(ê° ê²Œì‹œíŒ ë©”ì¸ í˜ì´ì§€ì—ì„œ ì‚¬ìš©)
  - ì„œë¸Œ ì¹´í…Œê³ ë¦¬
    - ê° ê²Œì‹œíŒì˜ ì„¸ë¶€ ì¹´í…Œê³ ë¦¬ì˜ ê²Œì‹œë¬¼ì„ ì½ì–´ì˜¨ë‹¤.

```javascript
// ë©”ì¸ ì¹´í…Œê³ ë¦¬ Read
function axiosReadMain(mainCategory, success, fail) {
  instance
    .get(`/article/main/${mainCategory}`)
    .then(success)
    .catch(fail);
}

// ì„œë¸Œ ì¹´í…Œê³ ë¦¬ Read
function axiosReadSub(subCategory, success, fail) {
  instance
    .get(`/article/sub/${subCategory}`)
    .then(success)
    .catch(fail);
}
```

- ê° ì»´í¬ë„ŒíŠ¸ ë³„ axiosReadSubë©”ì„œë“œ ì‚¬ìš©

```javascript
// ê° ì»´í¬ë„ŒíŠ¸ë³„ë¡œ subCategoryì— í•´ë‹¹í•˜ëŠ” ê²Œì‹œë¬¼ë§Œ ë°›ì•„ì˜¨ë‹¤.
created() {
    // community - free, anonymous, promotion
    // information - it, job
    const subCategory = '{subCategory ì´ë¦„}' 
    this.articles = axiosReadSub(
        subCategory,
        res => {
            console.log(res)
            this.articles = res.data
            console.log(res.data)
        },
        err => {
            console.log(err);
        }
    )
},
```



- ê° ì»´í¬ë„ŒíŠ¸ì˜ writeArticle ë©”ì„œë“œ

```javascript
// ê¸€ì“°ê¸° ë²„íŠ¼ì„ ëˆ„ë¥¼ ë•Œ, Register.vueì— mainCategoryì™€ subCategoryë¥¼ ê°™ì´ ë³´ë‚¸ë‹¤.

// ê²Œì‹œíŒ
params: { mainCategory:'community', subCategory: "free" }
params: { mainCategory:'community', subCategory: "anonymous" }
params: { mainCategory:'community', subCategory: "promotion" }

// ì •ë³´
params: { mainCategory:'information', subCategory: "it" }
params: { mainCategory:'information', subCategory: "job" }
```

- Register.vue

```javascript
// ê° ì»´í¬ë„ŒíŠ¸ì—ì„œ ë³´ë‚¸ ì •ë³´ë¥¼ $routeë¥¼ í†µí•´ ë°›ì•„ ì‚¬ìš©
data() {
    return {
        ...
        mainCategory: this.$route.params.mainCategory,
        subCategory: this.$route.params.subCategory    
    };
},
```

### ğŸ¤·â€â™‚ï¸ê°œë°œì´ìŠˆ

> ê°œë°œ ê³¼ì •ì—ì„œ ë°œìƒí•œ ì´ìŠˆê°€ ìˆë‹¤ë©´ ì•Œë ¤ì£¼ì„¸ìš”

```
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Cannot add or update a child row: a foreign key constraint fails (`ssafying`.`Article`, CONSTRAINT `FK_User_TO_Article_1` FOREIGN KEY (`userId`) REFERENCES `User` (`userId`))
### The error may exist in file [C:\Users\multicampus\Desktop\c101\backend\target\classes\mapper\article.xml]
### The error may involve com.ssafy.ssafying.model.mapper.ArticleMapper.articleInsert-Inline
### The error occurred while setting parameters
### SQL: insert into Article(                   userId,                   title,                   content,                   mainCategory,    
               subCategory,                   price,                   location,                   articleImage,                   watchCount  
           )             values(                   ?,                   ?,                   ?,                   ?,                   ?,      
             ?,                   ?,                   ?,                   ?             );
### Cause: java.sql.SQLIntegrityConstraintViolationException: Cannot add or update a child row: a foreign key constraint fails (`ssafying`.`Article`, CONSTRAINT `FK_User_TO_Article_1` FOREIGN KEY (`userId`) REFERENCES `User` (`userId`))
; Cannot add or update a child row: a foreign key constraint fails (`ssafying`.`Article`, CONSTRAINT `FK_User_TO_Article_1` FOREIGN KEY (`userId`) REFERENCES `User` (`userId`)); nested exception is java.sql.SQLIntegrityConstraintViolationException: Cannot add or update a child row: a foreign key constraint fails (`ssafying`.`Article`, CONSTRAINT `FK_User_TO_Article_1` FOREIGN KEY (`userId`) REFERENCES `User` (`userId`))] with root cause

- í˜„ì¬ ì»´í¬ë„ŒíŠ¸ë³„ router/CRUD axiosí†µì‹  ì‘ì—… ì™„ë£Œ
- userIdì— ëŒ€í•œ ì˜¤ë¥˜ë¡œ ìˆ˜ì • ì§„í–‰ ì¤‘ì´ë¯€ë¡œ ìœ ì €ì•„ì´ë”” ë°›ì•„ì˜¤ëŠ” ë¶€ë¶„ êµ¬í˜„ë˜ë©´ ì‘ì—…í•œ ë¶€ë¶„ ë‹¤ì‹œ í™•ì¸í•´ë´ì•¼í•¨
```



### ğŸ±â€ğŸš€í–¥í›„ ê°œë°œ ê³„íš

> ê¸ˆì¼ ê°œë°œê³¼ì •ì„ ë°”íƒ•ìœ¼ë¡œ ë‚´ì¼ í˜¹ì€ ê¸ˆì£¼ì— ê°œë°œì´ í•„ìš”í•œ ë‚´ìš©ì„ ì•Œë ¤ì£¼ì„¸ìš”

```javascript
// ê²Œì‹œíŒ ë³„ router.js ë³€ê²½ ë° ì¶”ê°€
í˜„ì¬
board/{subCategory}

ë³€ê²½ ì˜ˆì •
board/{MainCategory}/{subCategory}
```

